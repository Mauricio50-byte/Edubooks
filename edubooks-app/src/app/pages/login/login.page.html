<ion-header [translucent]="true">
  <ion-toolbar color="primary">
    <ion-title class="ion-text-center">
      <ion-icon name="book-outline" style="margin-right: 8px;"></ion-icon>
      EduBooks
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="login-content">
  <div class="login-container">
    <!-- Logo y título -->
    <div class="logo-section">
      <ion-icon name="library-outline" class="logo-icon"></ion-icon>
      <h1>Bienvenido</h1>
      <p>Inicia sesión en tu cuenta</p>
    </div>

    <!-- Formulario de login -->
    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="login-form">
      <!-- Email -->
      <ion-item class="form-item" [class.ion-invalid]="email?.invalid && email?.touched">
        <ion-label position="stacked">Email</ion-label>
        <ion-input 
          formControlName="email" 
          type="email" 
          placeholder="tu@email.com"
          [clearOnEdit]="false">
        </ion-input>
        <ion-icon name="mail-outline" slot="start"></ion-icon>
        <ion-note slot="error" *ngIf="email?.errors?.['required'] && email?.touched">
          El email es requerido
        </ion-note>
        <ion-note slot="error" *ngIf="email?.errors?.['email'] && email?.touched">
          Ingresa un email válido
        </ion-note>
      </ion-item>

      <!-- Password -->
      <ion-item class="form-item" [class.ion-invalid]="password?.invalid && password?.touched">
        <ion-label position="stacked">Contraseña</ion-label>
        <ion-input 
          formControlName="password" 
          [type]="showPassword ? 'text' : 'password'" 
          placeholder="Tu contraseña"
          [clearOnEdit]="false">
        </ion-input>
        <ion-icon name="lock-closed-outline" slot="start"></ion-icon>
        <ion-button 
          fill="clear" 
          slot="end" 
          (click)="togglePasswordVisibility()"
          type="button">
          <ion-icon 
            [name]="showPassword ? 'eye-off-outline' : 'eye-outline'"
            color="medium">
          </ion-icon>
        </ion-button>
        <ion-note slot="error" *ngIf="password?.errors?.['required'] && password?.touched">
          La contraseña es requerida
        </ion-note>
        <ion-note slot="error" *ngIf="password?.errors?.['minlength'] && password?.touched">
          La contraseña debe tener al menos 8 caracteres
        </ion-note>
      </ion-item>

      <!-- Botón de login -->
      <ion-button 
        expand="block" 
        type="submit" 
        class="login-button"
        [disabled]="loginForm.invalid || isLoading">
        <ion-spinner name="dots" *ngIf="isLoading"></ion-spinner>
        <span *ngIf="!isLoading">Iniciar Sesión</span>
      </ion-button>
    </form>

    <!-- Enlaces adicionales -->
    <div class="additional-links">
      <ion-button fill="clear" (click)="goToRegister()" class="register-link">
        ¿No tienes cuenta? Regístrate aquí
      </ion-button>
    </div>
  </div>
</ion-content>